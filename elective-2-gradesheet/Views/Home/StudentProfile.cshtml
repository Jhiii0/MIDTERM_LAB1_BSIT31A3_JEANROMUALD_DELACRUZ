@model StudentProfileViewModel
@using elective_2_gradesheet.Data.Entities

@{
    ViewData["Title"] = "Student Profile";
}

<div class="container mt-5">
    <div class="card mb-4">
        <div class="card-header">
            <h3>@Model.StudentFullName</h3>
        </div>
        <div class="card-body">
            <p><strong>Section:</strong> @Model.SectionName</p>
        </div>
    </div>

    <h4 class="mb-3">Activities</h4>

    <!-- Filter Form -->
    <form asp-action="StudentProfile" method="get" class="mb-4 p-3 border rounded">
        <input type="hidden" name="id" value="@Model.StudentId" />
        <div class="row g-3 align-items-end">
            <div class="col-md-4">
                <label class="form-label">Filter by Period:</label>
                <select name="period" asp-for="CurrentPeriod" asp-items="Html.GetEnumSelectList<GradingPeriod>()" class="form-control">
                    <option value="">All Periods</option>
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">Filter</button>
            </div>
        </div>
    </form>

    <!-- Data Table -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>
                        <a asp-action="StudentProfile" asp-route-id="@Model.StudentId" asp-route-sortOrder="@ViewData["PeriodSortParm"]" asp-route-period="@Model.CurrentPeriod">Period</a>
                    </th>
                    <th>Activity Name</th>
                    <th>Status</th>
                    <th>Points</th>
                    <th>Max Points</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Activities)
                {
                    <tr>
                        <td>@item.GradingPeriod</td>
                        <td>@item.ActivityName</td>
                        <td>@item.Status</td>
                        <td>@item.Points</td>
                        <td>@item.MaxPoints</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
